{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FORTRIX\\\\Desktop\\\\react_project\\\\src\\\\components\\\\Adverts\\\\SearchFilter\\\\SearchFilter.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport s from './SearchFilter.module.css';\nimport Select from \"./Select/Select\";\nimport Input from \"./Input/Input\";\nimport PriceSelect from \"./PriceSelect/PriceSelect\";\nimport SpaceLine from \"../../../SpaceLine\";\nimport { getAdsByFilter } from \"../../../store/Actions/SearchFilterActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SearchFilter = props => {\n  _s();\n\n  let template = props.template;\n  let rent = props.rent;\n\n  const onChangeRent = event => {\n    props.changeRent(event.target.value);\n    template.rent = event.target.value === 'Да';\n  };\n\n  let rentPeriod = props.rentPeriod;\n\n  const onChangeRentPeriod = event => {\n    props.changeRentPeriod(event.target.value);\n    template.rentPeriod = event.target.value === 'Посуточный';\n  };\n\n  let roomNumber = props.roomNumber;\n\n  const onChangeRoomNumber = event => {\n    props.changeRoomNumber(event.target.value);\n    template.roomNumber = parseInt(event.target.value);\n  };\n\n  let stage = props.stage;\n\n  const onChangeStage = event => {\n    props.changeStage(event.target.value);\n    template.floor = parseInt(event.target.value);\n    template.floorCount = parseInt(event.target.value);\n  };\n\n  let brand = props.brand;\n\n  const onChangeBrand = event => {\n    props.changeBrand(event.target.value);\n    template.brand = event.target.value;\n  };\n\n  let relaseYear = props.relaseYear;\n\n  const onChangeRelaseYear = event => {\n    props.changeRelaseYear(event.target.value);\n    template.relaseYear = parseInt(event.target.value);\n  };\n\n  let milage = props.milage;\n\n  const onChangeMilage = event => {\n    props.changeMilage(event.target.value);\n    template.milage = parseInt(event.target.value);\n  };\n\n  let capacity = props.capacity;\n\n  const onChangeCapacity = event => {\n    props.changeCapacity(event.target.value);\n    template.capacity = parseFloat(event.target.value);\n  };\n\n  let wheelDrive = props.wheelDrive;\n\n  const onChangeWheelDrive = event => {\n    props.changeWheelDrive(event.target.value);\n    template.wheelDrive = event.target.value;\n  };\n\n  let gears = props.gears;\n\n  const onChangeGears = event => {\n    props.changeGears(event.target.value);\n    template.gears = parseInt(event.target.value);\n  };\n\n  let wasInUse = props.wasInUse;\n\n  const onChangeWasInUse = event => {\n    props.changeWasInUse(event.target.value);\n    template.wasInUse = event.target.value === \"Да\";\n  };\n\n  let monthlyCost = props.monthlyCost;\n\n  const onChangeMonthlyCost = event => {\n    props.changeMonthlyCost(event.target.value);\n    template.monthlyCost = parseInt(event.target.value);\n  };\n\n  const [categoryId, setCategoryId] = useState(0);\n\n  const handleSetCategoryId = id => {\n    setCategoryId(id);\n  };\n\n  const [chosedCategory, setChosedCategory] = useState('Не выбрано');\n\n  const handleSetChosedCategory = category => {\n    if (chosedSubcategory !== 'Не выбрано') {\n      setChosedSubcategory('Не выбрано');\n      setSubcategoryId(0);\n    }\n\n    handleSetCategoryId(parseInt(category.target.value));\n    setChosedCategory(category.target.value);\n  };\n\n  const [subcategoryId, setSubcategoryId] = useState(0);\n\n  const handleSetSubcategoryId = id => {\n    setSubcategoryId(id);\n  };\n\n  const [chosedSubcategory, setChosedSubcategory] = useState('Не выбрано');\n\n  const handleSetChosedSubcategory = subcategory => {\n    handleSetSubcategoryId(parseInt(subcategory.target.value));\n    setChosedSubcategory(subcategory.target.value);\n  };\n\n  const [price, setPrice] = useState({\n    priceStart: 0,\n    priceEnd: 0\n  });\n\n  const handleSetPrice = price => {\n    setPrice(price);\n    template.priceStart = price.priceStart;\n    template.priceEnd = price.priceEnd;\n  };\n\n  console.log(template);\n\n  const getSubcategoryListByCurrentCategory = () => {\n    let subcategoryList = [];\n\n    if (props.subcategoryList.length > 0) {\n      for (let i = 0; i < props.subcategoryList.length; i++) {\n        if (props.subcategoryList[i].categoryId === categoryId) {\n          subcategoryList.push(props.subcategoryList[i]);\n        }\n      }\n    }\n\n    return subcategoryList;\n  };\n\n  const getCategoryOptions = () => {\n    return props.categoryList.map(category => {\n      return /*#__PURE__*/_jsxDEV(\"option\", {\n        value: category.id,\n        children: category.option\n      }, category.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 14\n      }, this);\n    });\n  };\n\n  const getSubcategoryOptions = () => {\n    const subcategoryList = getSubcategoryListByCurrentCategory();\n    return subcategoryList.map(subcategory => {\n      return /*#__PURE__*/_jsxDEV(\"option\", {\n        value: subcategory.id,\n        children: subcategory.option\n      }, subcategory.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 14\n      }, this);\n    });\n  };\n\n  let listItemsToOptions = listItems => {\n    return listItems.map(el => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: el.option,\n      children: el.option\n    }, el.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 32\n    }, this));\n  };\n\n  useEffect(() => {\n    if (props.subcategoryList.length === 0) {\n      if (props.currentCategory.name) {\n        props.getSubCategories();\n        props.getCategories();\n      }\n\n      if (props.currentCategory.categoryName) {\n        handleSetCategoryId(props.currentCategory.categoryId);\n        props.getSubCategories();\n      }\n\n      if (props.currentCategory.subcategories) {\n        handleSetSubcategoryId(props.currentCategory.subId);\n      }\n    }\n  }, [props.subcategoryList]);\n\n  const getCurrentHeight = () => {\n    switch (subcategoryId) {\n      case 1:\n      case 2:\n        return '900px';\n\n      case 3:\n      case 4:\n        return '900px';\n\n      case 5:\n      case 6:\n        return '700px';\n\n      default:\n        return '200px';\n    }\n  };\n\n  useEffect(() => {\n    if (subcategoryId > 0) props.getTemplate(subcategoryId);\n  }, [subcategoryId]);\n\n  const handleSubmit = () => {\n    props.getAdsByFilter({\n      subcategoryId,\n      template\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: getCurrentHeight()\n    },\n    className: s.filter__container,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [props.currentCategory.name && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Select, {\n          label: 'Категория',\n          handle: getCategoryOptions(),\n          value: chosedCategory,\n          onChange: handleSetChosedCategory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          label: 'Подкатегория',\n          handle: getSubcategoryOptions(),\n          value: chosedSubcategory,\n          onChange: handleSetChosedSubcategory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(SpaceLine, {\n          margin: '0 auto',\n          width: 200,\n          marginTop: 10,\n          marginBottom: 10\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }, this), props.currentCategory.categoryName && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Select, {\n          label: 'Подкатегория',\n          handle: getSubcategoryOptions(),\n          value: chosedSubcategory,\n          onChange: handleSetChosedSubcategory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(SpaceLine, {\n          margin: '0 auto',\n          width: 200,\n          marginTop: 10,\n          marginBottom: 10\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }, this), (props.currentCategory.subcategories || subcategoryId > 0) && template && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(PriceSelect, {\n          value: price,\n          onChange: handleSetPrice\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(SpaceLine, {\n          margin: '0 auto',\n          width: 200,\n          marginTop: 10,\n          marginBottom: 10\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 15\n        }, this), subcategoryId === 1 && template && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Select, {\n            label: 'Аренда',\n            handle: listItemsToOptions(props.boolOption),\n            value: rent,\n            onChange: onChangeRent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 19\n          }, this), template.rent && /*#__PURE__*/_jsxDEV(Select, {\n            label: 'Срок аренды',\n            handle: listItemsToOptions(props.rentOption),\n            value: rentPeriod,\n            onChange: onChangeRentPeriod\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Месячная стоимость',\n            placeholder: 'Цена в руб.',\n            value: monthlyCost,\n            onChange: onChangeMonthlyCost\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Количество комнат',\n            placeholder: 'Например: 4',\n            value: roomNumber,\n            onChange: onChangeRoomNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Количество этажей',\n            placeholder: 'Например: 2',\n            value: stage,\n            onChange: onChangeStage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 17\n        }, this), subcategoryId === 2 && template && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Select, {\n            label: 'Аренда',\n            handle: listItemsToOptions(props.boolOption),\n            value: rent,\n            onChange: onChangeRent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 19\n          }, this), template.rent && /*#__PURE__*/_jsxDEV(Select, {\n            label: 'Срок аренды',\n            handle: listItemsToOptions(props.rentOption),\n            value: rentPeriod,\n            onChange: onChangeRentPeriod\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Месячная стоимость',\n            placeholder: 'Цена в руб.',\n            value: monthlyCost,\n            onChange: onChangeMonthlyCost\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Количество комнат',\n            placeholder: 'Например: 4',\n            value: roomNumber,\n            onChange: onChangeRoomNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Этаж',\n            placeholder: 'Например: 11',\n            value: stage,\n            onChange: onChangeStage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 17\n        }, this), subcategoryId === 3 && template && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            label: 'Марка',\n            placeholder: 'Nissan',\n            value: brand,\n            onChange: onChangeBrand\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Год выпуска',\n            placeholder: '2010',\n            value: relaseYear,\n            onChange: onChangeRelaseYear\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Пробег (км.)',\n            placeholder: '300000',\n            value: milage,\n            onChange: onChangeMilage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Объем двигателя',\n            placeholder: '4.5',\n            value: capacity,\n            onChange: onChangeCapacity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            label: 'Привод',\n            handle: listItemsToOptions(props.wheelDriveOption),\n            value: wheelDrive,\n            onChange: onChangeWheelDrive\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 17\n        }, this), subcategoryId === 4 && template && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            label: 'Марка',\n            placeholder: 'Nissan',\n            value: brand,\n            onChange: onChangeBrand\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Год выпуска',\n            placeholder: '2010',\n            value: relaseYear,\n            onChange: onChangeRelaseYear\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Пробег (км.)',\n            placeholder: '300000',\n            value: milage,\n            onChange: onChangeMilage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Объем двигателя',\n            placeholder: '4.5',\n            value: capacity,\n            onChange: onChangeCapacity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            label: 'Количество передач',\n            handle: listItemsToOptions(props.gearsOption),\n            value: gears,\n            onChange: onChangeGears\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 17\n        }, this), (subcategoryId === 5 || subcategoryId === 6) && template && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Select, {\n            label: 'Б/у?',\n            handle: listItemsToOptions(props.boolOption),\n            value: wasInUse,\n            onChange: onChangeWasInUse\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Марка',\n            placeholder: 'LG',\n            value: brand,\n            onChange: onChangeBrand\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            label: 'Год выпуска',\n            placeholder: '2002',\n            value: relaseYear,\n            onChange: onChangeRelaseYear\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: s.filter__btn,\n          onClick: handleSubmit,\n          children: \"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 7\n  }, this);\n};\n\n_s(SearchFilter, \"FGnkGBkIpzuTIHssdIt4xEKbP+4=\");\n\n_c = SearchFilter;\nexport default SearchFilter;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchFilter\");","map":{"version":3,"sources":["C:/Users/FORTRIX/Desktop/react_project/src/components/Adverts/SearchFilter/SearchFilter.js"],"names":["React","useEffect","useState","s","Select","Input","PriceSelect","SpaceLine","getAdsByFilter","SearchFilter","props","template","rent","onChangeRent","event","changeRent","target","value","rentPeriod","onChangeRentPeriod","changeRentPeriod","roomNumber","onChangeRoomNumber","changeRoomNumber","parseInt","stage","onChangeStage","changeStage","floor","floorCount","brand","onChangeBrand","changeBrand","relaseYear","onChangeRelaseYear","changeRelaseYear","milage","onChangeMilage","changeMilage","capacity","onChangeCapacity","changeCapacity","parseFloat","wheelDrive","onChangeWheelDrive","changeWheelDrive","gears","onChangeGears","changeGears","wasInUse","onChangeWasInUse","changeWasInUse","monthlyCost","onChangeMonthlyCost","changeMonthlyCost","categoryId","setCategoryId","handleSetCategoryId","id","chosedCategory","setChosedCategory","handleSetChosedCategory","category","chosedSubcategory","setChosedSubcategory","setSubcategoryId","subcategoryId","handleSetSubcategoryId","handleSetChosedSubcategory","subcategory","price","setPrice","priceStart","priceEnd","handleSetPrice","console","log","getSubcategoryListByCurrentCategory","subcategoryList","length","i","push","getCategoryOptions","categoryList","map","option","getSubcategoryOptions","listItemsToOptions","listItems","el","currentCategory","name","getSubCategories","getCategories","categoryName","subcategories","subId","getCurrentHeight","getTemplate","handleSubmit","height","filter__container","boolOption","rentOption","wheelDriveOption","gearsOption","filter__btn"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport s from './SearchFilter.module.css';\r\nimport Select from \"./Select/Select\";\r\nimport Input from \"./Input/Input\";\r\nimport PriceSelect from \"./PriceSelect/PriceSelect\";\r\nimport SpaceLine from \"../../../SpaceLine\";\r\nimport {getAdsByFilter} from \"../../../store/Actions/SearchFilterActions\";\r\n\r\nconst SearchFilter = (props) => {\r\n\r\n  let template = props.template;\r\n\r\n  let rent = props.rent;\r\n  const onChangeRent = (event) => { props.changeRent(event.target.value); template.rent = event.target.value === 'Да';}\r\n\r\n  let rentPeriod = props.rentPeriod;\r\n  const onChangeRentPeriod = (event) => { props.changeRentPeriod(event.target.value); template.rentPeriod = event.target.value === 'Посуточный'; }\r\n\r\n  let roomNumber = props.roomNumber;\r\n  const onChangeRoomNumber = (event) => { props.changeRoomNumber(event.target.value); template.roomNumber = parseInt(event.target.value); }\r\n\r\n  let stage = props.stage;\r\n  const onChangeStage = (event) => {\r\n    props.changeStage(event.target.value);\r\n    template.floor = parseInt(event.target.value);\r\n    template.floorCount = parseInt(event.target.value);\r\n  }\r\n\r\n  let brand = props.brand;\r\n  const onChangeBrand = (event) => { props.changeBrand(event.target.value); template.brand = event.target.value; }\r\n\r\n  let relaseYear = props.relaseYear;\r\n  const onChangeRelaseYear = (event) => { props.changeRelaseYear(event.target.value); template.relaseYear = parseInt(event.target.value); }\r\n\r\n  let milage = props.milage;\r\n  const onChangeMilage = (event) => { props.changeMilage(event.target.value); template.milage = parseInt(event.target.value); }\r\n\r\n  let capacity = props.capacity;\r\n  const onChangeCapacity = (event) => { props.changeCapacity(event.target.value); template.capacity = parseFloat(event.target.value); }\r\n\r\n  let wheelDrive = props.wheelDrive;\r\n  const onChangeWheelDrive = (event) => { props.changeWheelDrive(event.target.value); template.wheelDrive = event.target.value; }\r\n\r\n  let gears = props.gears;\r\n  const onChangeGears = (event) => { props.changeGears(event.target.value); template.gears = parseInt(event.target.value); }\r\n\r\n  let wasInUse = props.wasInUse;\r\n  const onChangeWasInUse = (event) => { props.changeWasInUse(event.target.value); template.wasInUse = event.target.value === \"Да\"; }\r\n\r\n  let monthlyCost = props.monthlyCost;\r\n  const onChangeMonthlyCost = (event) => { props.changeMonthlyCost(event.target.value); template.monthlyCost = parseInt(event.target.value); }\r\n\r\n  const [categoryId, setCategoryId] = useState(0);\r\n  const handleSetCategoryId = (id) => {\r\n    setCategoryId(id);\r\n  }\r\n\r\n  const [chosedCategory, setChosedCategory] = useState('Не выбрано');\r\n  const handleSetChosedCategory = (category) => {\r\n    if (chosedSubcategory !== 'Не выбрано') {\r\n      setChosedSubcategory('Не выбрано');\r\n      setSubcategoryId(0);\r\n    }\r\n\r\n    handleSetCategoryId(parseInt(category.target.value));\r\n    setChosedCategory(category.target.value);\r\n  }\r\n\r\n\r\n  const [subcategoryId, setSubcategoryId] = useState(0);\r\n  const handleSetSubcategoryId = (id) => {\r\n    setSubcategoryId(id);\r\n  }\r\n\r\n  const [chosedSubcategory, setChosedSubcategory] = useState('Не выбрано');\r\n  const handleSetChosedSubcategory = (subcategory) => {\r\n    handleSetSubcategoryId(parseInt(subcategory.target.value));\r\n    setChosedSubcategory(subcategory.target.value);\r\n  }\r\n\r\n  const [price, setPrice] = useState({priceStart: 0, priceEnd: 0});\r\n  const handleSetPrice = (price) => {\r\n    setPrice(price);\r\n    template.priceStart = price.priceStart;\r\n    template.priceEnd = price.priceEnd;\r\n  }\r\n\r\n  console.log(template);\r\n\r\n  const getSubcategoryListByCurrentCategory = () => {\r\n    let subcategoryList = [];\r\n\r\n    if (props.subcategoryList.length > 0) {\r\n      for (let i = 0; i < props.subcategoryList.length; i++) {\r\n        if (props.subcategoryList[i].categoryId === categoryId) {\r\n          subcategoryList.push(props.subcategoryList[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return subcategoryList;\r\n  }\r\n\r\n  const getCategoryOptions = () => {\r\n    return props.categoryList.map(category => {\r\n      return <option key={category.id} value={category.id}>{category.option}</option>\r\n    })\r\n  };\r\n\r\n  const getSubcategoryOptions = () => {\r\n    const subcategoryList = getSubcategoryListByCurrentCategory();\r\n\r\n    return subcategoryList.map(subcategory => {\r\n      return <option key={subcategory.id} value={subcategory.id}>{subcategory.option}</option>\r\n    })\r\n  };\r\n\r\n  let listItemsToOptions = (listItems) => {\r\n    return listItems.map(el => <option key={el.id} value={el.option}>{el.option}</option>);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.subcategoryList.length === 0) {\r\n      if (props.currentCategory.name) {\r\n        props.getSubCategories();\r\n        props.getCategories();\r\n      }\r\n\r\n      if (props.currentCategory.categoryName) {\r\n        handleSetCategoryId(props.currentCategory.categoryId);\r\n        props.getSubCategories();\r\n      }\r\n\r\n      if (props.currentCategory.subcategories) {\r\n        handleSetSubcategoryId(props.currentCategory.subId);\r\n      }\r\n    }\r\n  }, [props.subcategoryList]);\r\n\r\n  const getCurrentHeight = () => {\r\n    switch (subcategoryId) {\r\n      case 1: case 2: return '900px';\r\n      case 3: case 4: return '900px';\r\n      case 5: case 6: return '700px';\r\n\r\n      default: return '200px';\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (subcategoryId > 0)\r\n      props.getTemplate(subcategoryId);\r\n  }, [subcategoryId]);\r\n\r\n  const handleSubmit = () => {\r\n    props.getAdsByFilter({subcategoryId, template});\r\n  }\r\n\r\n  return (\r\n      <div style={{height: getCurrentHeight()}} className={s.filter__container}>\r\n        <div>\r\n          {props.currentCategory.name &&\r\n            <div>\r\n              <Select label={'Категория'} handle={getCategoryOptions()} value={chosedCategory} onChange={handleSetChosedCategory}/>\r\n              <Select label={'Подкатегория'} handle={getSubcategoryOptions()} value={chosedSubcategory} onChange={handleSetChosedSubcategory}/>\r\n              <SpaceLine margin={'0 auto'} width={200} marginTop={10} marginBottom={10}/>\r\n            </div>\r\n          }\r\n\r\n          {props.currentCategory.categoryName &&\r\n            <div>\r\n              <Select label={'Подкатегория'} handle={getSubcategoryOptions()} value={chosedSubcategory} onChange={handleSetChosedSubcategory}/>\r\n              <SpaceLine margin={'0 auto'} width={200} marginTop={10} marginBottom={10}/>\r\n            </div>\r\n          }\r\n\r\n          {(props.currentCategory.subcategories || subcategoryId > 0) && template &&\r\n            <div>\r\n              <PriceSelect value={price} onChange={handleSetPrice}/>\r\n\r\n              <SpaceLine margin={'0 auto'} width={200} marginTop={10} marginBottom={10}/>\r\n\r\n              {subcategoryId === 1 && template &&\r\n                <div>\r\n                  <Select label={'Аренда'} handle={listItemsToOptions(props.boolOption)} value={rent} onChange={onChangeRent}/>\r\n                  {template.rent &&\r\n                    <Select label={'Срок аренды'} handle={listItemsToOptions(props.rentOption)} value={rentPeriod} onChange={onChangeRentPeriod}/>\r\n                  }\r\n                  <Input label={'Месячная стоимость'} placeholder={'Цена в руб.'} value={monthlyCost} onChange={onChangeMonthlyCost}/>\r\n                  <Input label={'Количество комнат'} placeholder={'Например: 4'} value={roomNumber} onChange={onChangeRoomNumber}/>\r\n                  <Input label={'Количество этажей'} placeholder={'Например: 2'} value={stage} onChange={onChangeStage}/>\r\n                </div>\r\n              }\r\n              {subcategoryId === 2 && template &&\r\n                <div>\r\n                  <Select label={'Аренда'} handle={listItemsToOptions(props.boolOption)} value={rent} onChange={onChangeRent}/>\r\n                  {template.rent &&\r\n                      <Select label={'Срок аренды'} handle={listItemsToOptions(props.rentOption)} value={rentPeriod} onChange={onChangeRentPeriod}/>\r\n                  }\r\n                  <Input label={'Месячная стоимость'} placeholder={'Цена в руб.'} value={monthlyCost} onChange={onChangeMonthlyCost}/>\r\n                  <Input label={'Количество комнат'} placeholder={'Например: 4'} value={roomNumber} onChange={onChangeRoomNumber}/>\r\n                  <Input label={'Этаж'} placeholder={'Например: 11'} value={stage} onChange={onChangeStage}/>\r\n                </div>\r\n              }\r\n              {subcategoryId === 3 && template &&\r\n                <div>\r\n                  <Input label={'Марка'} placeholder={'Nissan'} value={brand} onChange={onChangeBrand}/>\r\n                  <Input label={'Год выпуска'} placeholder={'2010'} value={relaseYear} onChange={onChangeRelaseYear}/>\r\n                  <Input label={'Пробег (км.)'} placeholder={'300000'} value={milage} onChange={onChangeMilage}/>\r\n                  <Input label={'Объем двигателя'} placeholder={'4.5'} value={capacity} onChange={onChangeCapacity}/>\r\n                  <Select label={'Привод'} handle={listItemsToOptions(props.wheelDriveOption)} value={wheelDrive} onChange={onChangeWheelDrive}/>\r\n                </div>\r\n              }\r\n              {subcategoryId === 4 && template &&\r\n                <div>\r\n                  <Input label={'Марка'} placeholder={'Nissan'} value={brand} onChange={onChangeBrand}/>\r\n                  <Input label={'Год выпуска'} placeholder={'2010'} value={relaseYear} onChange={onChangeRelaseYear}/>\r\n                  <Input label={'Пробег (км.)'} placeholder={'300000'} value={milage} onChange={onChangeMilage}/>\r\n                  <Input label={'Объем двигателя'} placeholder={'4.5'} value={capacity} onChange={onChangeCapacity}/>\r\n                  <Select label={'Количество передач'} handle={listItemsToOptions(props.gearsOption)} value={gears} onChange={onChangeGears}/>\r\n                </div>\r\n              }\r\n              {(subcategoryId === 5 || subcategoryId === 6) && template &&\r\n                <div>\r\n                  <Select label={'Б/у?'} handle={listItemsToOptions(props.boolOption)} value={wasInUse} onChange={onChangeWasInUse}/>\r\n                  <Input label={'Марка'} placeholder={'LG'} value={brand} onChange={onChangeBrand}/>\r\n                  <Input label={'Год выпуска'} placeholder={'2002'} value={relaseYear} onChange={onChangeRelaseYear}/>\r\n                </div>\r\n              }\r\n\r\n              <button className={s.filter__btn} onClick={handleSubmit}>Применить</button>\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default SearchFilter;"]},"metadata":{},"sourceType":"module"}