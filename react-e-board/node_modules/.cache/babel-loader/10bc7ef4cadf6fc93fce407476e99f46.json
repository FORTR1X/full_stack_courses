{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FORTRIX\\\\Desktop\\\\react_project\\\\src\\\\Authentication\\\\OAuth\\\\OAuth.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useLocation } from \"react-router-dom\";\nimport useLocalStorage from \"../../hooks/useLocalStorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst OAuth = props => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const location = useLocation().hash;\n  const isAuth = props.isAuth;\n  useEffect(() => {\n    if (location && props.user === null && props.accessToken === null) props.getOAuthData(location);\n    if (location && props.user === null && props.accessToken !== null && props.userId !== null) props.getOAuthUser({\n      userId: props.userId,\n      accessToken: props.accessToken\n    }); // todo: получение изображения пользователя (в base64 или src), сохранение токена в localstorage OAuthToken,\n  }, [props]);\n\n  _s(useEffect(_s(() => {\n    _s();\n\n    const [token, setToken] = useLocalStorage(null, 'token');\n\n    if (token !== \"null\" && !isAuth) {\n      props.checkIsAuth(token);\n    }\n  }, \"XMglG9YL02A1EN55YcR63LtnP3E=\", false, function () {\n    return [useLocalStorage];\n  }), [isAuth]), \"XMglG9YL02A1EN55YcR63LtnP3E=\", false, function () {\n    return [useLocalStorage];\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 7\n  }, this);\n};\n\n_s2(OAuth, \"gDqveyxQPEawuOOjrGwC+jwTovM=\", false, function () {\n  return [useLocation];\n});\n\n_c = OAuth;\nexport default OAuth;\n\nvar _c;\n\n$RefreshReg$(_c, \"OAuth\");","map":{"version":3,"sources":["C:/Users/FORTRIX/Desktop/react_project/src/Authentication/OAuth/OAuth.js"],"names":["React","useEffect","useLocation","useLocalStorage","OAuth","props","location","hash","isAuth","user","accessToken","getOAuthData","userId","getOAuthUser","token","setToken","checkIsAuth"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,WAAR,QAA0B,kBAA1B;AACA,OAAOC,eAAP,MAA4B,6BAA5B;;;AAEA,MAAMC,KAAK,GAAIC,KAAD,IAAW;AAAA;;AAAA;;AACvB,QAAMC,QAAQ,GAAGJ,WAAW,GAAGK,IAA/B;AACA,QAAMC,MAAM,GAAGH,KAAK,CAACG,MAArB;AAEAP,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIK,QAAQ,IAAID,KAAK,CAACI,IAAN,KAAe,IAA3B,IAAmCJ,KAAK,CAACK,WAAN,KAAsB,IAA7D,EACEL,KAAK,CAACM,YAAN,CAAmBL,QAAnB;AAEF,QAAIA,QAAQ,IAAID,KAAK,CAACI,IAAN,KAAe,IAA3B,IAAmCJ,KAAK,CAACK,WAAN,KAAsB,IAAzD,IAAiEL,KAAK,CAACO,MAAN,KAAiB,IAAtF,EACEP,KAAK,CAACQ,YAAN,CAAmB;AAACD,MAAAA,MAAM,EAAEP,KAAK,CAACO,MAAf;AAAuBF,MAAAA,WAAW,EAAEL,KAAK,CAACK;AAA1C,KAAnB,EALY,CAOd;AACD,GARQ,EAQN,CAACL,KAAD,CARM,CAAT;;AAUA,KAAAJ,SAAS,IAAE,MAAM;AAAA;;AACf,UAAM,CAACa,KAAD,EAAQC,QAAR,IAAoBZ,eAAe,CAAC,IAAD,EAAO,OAAP,CAAzC;;AAEA,QAAIW,KAAK,KAAK,MAAV,IAAoB,CAACN,MAAzB,EAAiC;AAC/BH,MAAAA,KAAK,CAACW,WAAN,CAAkBF,KAAlB;AACD;AAEF,GAPQ;AAAA,YACmBX,eADnB;AAAA,MAON,CAACK,MAAD,CAPM,CAAT;AAAA,YAC4BL,eAD5B;AAAA;;AASA,sBACI;AAAA;AAAA;AAAA;AAAA,UADJ;AAGD,CA1BD;;IAAMC,K;UACaF,W;;;KADbE,K;AA4BN,eAAeA,KAAf","sourcesContent":["import React, {useEffect} from 'react';\r\nimport {useLocation} from \"react-router-dom\";\r\nimport useLocalStorage from \"../../hooks/useLocalStorage\";\r\n\r\nconst OAuth = (props) => {\r\n  const location = useLocation().hash;\r\n  const isAuth = props.isAuth;\r\n\r\n  useEffect(() => {\r\n    if (location && props.user === null && props.accessToken === null)\r\n      props.getOAuthData(location);\r\n\r\n    if (location && props.user === null && props.accessToken !== null && props.userId !== null)\r\n      props.getOAuthUser({userId: props.userId, accessToken: props.accessToken})\r\n\r\n    // todo: получение изображения пользователя (в base64 или src), сохранение токена в localstorage OAuthToken,\r\n  }, [props]);\r\n\r\n  useEffect( () => {\r\n    const [token, setToken] = useLocalStorage(null, 'token');\r\n\r\n    if (token !== \"null\" && !isAuth) {\r\n      props.checkIsAuth(token);\r\n    }\r\n\r\n  }, [isAuth]);\r\n\r\n  return (\r\n      <div/>\r\n  );\r\n};\r\n\r\nexport default OAuth;"]},"metadata":{},"sourceType":"module"}