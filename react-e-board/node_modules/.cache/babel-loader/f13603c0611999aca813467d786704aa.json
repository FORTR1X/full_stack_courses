{"ast":null,"code":"import axios from \"axios\";\nimport { MAIN_PAGE, TRANSPORT, IMMOVABLES, HOUSEHOLD, APPARTAMENTS, HOUSES, CARS, MOTO, APPLIANCE, FURNITURE, setLocationName, AD_SEARCH } from \"./UrlReducer\";\nconst SET_ADVERTS = 'SET_ADVERTS';\nconst SET_LOCATION = 'SET_LOCATION';\nlet initialState = {\n  adverts: [],\n  namePage: ''\n};\n\nconst advertsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SET_ADVERTS:\n      let newAdvertList = [...state.adverts];\n      action.ads.map(ad => {\n        newAdvertList = [...newAdvertList, ad];\n      });\n      return { ...state,\n        adverts: newAdvertList\n      };\n\n    case SET_LOCATION:\n      let locationName = setLocationName(action.location);\n      return { ...state,\n        namePage: locationName\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const setAdverts = ads => ({\n  type: SET_ADVERTS,\n  ads\n});\n/*export const getImmovables = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/category/id1/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getTransport = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/category/id2/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getHousehold = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/category/id3/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getHouses = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id1/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getAppartaments = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id2/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getCars = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id3/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getMotocycles = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id4/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getAppliance = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id5/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n// todo ОБЕЩАЛ ИСПРАВИТЬ К ЗАЩИТЕ (ВСЁ В 1)\r\n\r\nexport const getFurniture = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id6/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}*/\n\nconst getCategoryAdverts = props => {\n  axios.get(`/ad/category/id${props.currentCategory.categoryId}/?limit=8&page=${page}`).then(response => dispatch(setAdverts(response.data)));\n};\n\nconst getSubcategoryAdverts = props => {\n  axios.get(`/ad/subcategory/id${props.currentCategory.sub}/?limit=8&page=${page}`);\n};\n\nexport const getNewAds = page => {\n  return dispatch => {\n    axios.get(`/ad/view?limit=8&page=${page}`).then(response => dispatch(setAdverts(response.data)));\n  };\n};\nexport const getSearchedAds = props => {\n  return dispatch => {\n    axios.get(`/ad/search?q=${props.search}&limit=10&page=${props.page}`).then(response => dispatch(setAdverts(response.data))).catch();\n  };\n}; // TODO ОБРАБОТКА ОШИБОК\n\nexport const setNamePage = location => ({\n  type: SET_LOCATION,\n  location\n});\nexport const getAdverts = props => {\n  return dispatch => {\n    if (props.currentCategory.categoryUrl !== null) {\n      dispatch();\n    }\n    /*switch (props.location.pathname) {\r\n      case MAIN_PAGE.url:\r\n        dispatch(getNewAds(props.page));\r\n        break;\r\n        case IMMOVABLES.url:\r\n        dispatch(getImmovables(props.page));\r\n        break;\r\n        case TRANSPORT.url:\r\n        dispatch(getTransport(props.page));\r\n        break;\r\n        case HOUSEHOLD.url:\r\n        dispatch(getHousehold(props.page));\r\n        break;\r\n        case APPARTAMENTS.url:\r\n        dispatch(getAppartaments(props.page));\r\n        break;\r\n        case HOUSES.url:\r\n        dispatch(getHouses(props.page));\r\n        break;\r\n        case CARS.url:\r\n        dispatch(getCars(props.page));\r\n        break;\r\n        case MOTO.url:\r\n        dispatch(getMotocycles(props.page));\r\n        break;\r\n        case APPLIANCE.url:\r\n        dispatch(getAppliance(props.page));\r\n        break;\r\n        case FURNITURE.url:\r\n        dispatch(getFurniture(props.page));\r\n        break;\r\n        case AD_SEARCH.url:\r\n        dispatch(getSearchedAds({ page: props.page, search: props.search }));\r\n        break;\r\n        default:\r\n        return null;\r\n    }*/\n\n  };\n}; // TODO ПОЛУЧАТЬ ЗНАЧЕНИЯ ИЗ БД\n\nexport default advertsReducer;","map":{"version":3,"sources":["C:/Users/FORTRIX/Desktop/react_project/src/redux/AdvertsReducer.js"],"names":["axios","MAIN_PAGE","TRANSPORT","IMMOVABLES","HOUSEHOLD","APPARTAMENTS","HOUSES","CARS","MOTO","APPLIANCE","FURNITURE","setLocationName","AD_SEARCH","SET_ADVERTS","SET_LOCATION","initialState","adverts","namePage","advertsReducer","state","action","type","newAdvertList","ads","map","ad","locationName","location","setAdverts","getCategoryAdverts","props","get","currentCategory","categoryId","page","then","response","dispatch","data","getSubcategoryAdverts","sub","getNewAds","getSearchedAds","search","catch","setNamePage","getAdverts","categoryUrl"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\n\r\nimport {\r\n  MAIN_PAGE,\r\n  TRANSPORT, IMMOVABLES, HOUSEHOLD,\r\n  APPARTAMENTS, HOUSES,\r\n  CARS, MOTO,\r\n  APPLIANCE, FURNITURE, setLocationName, AD_SEARCH\r\n} from \"./UrlReducer\";\r\n\r\nconst SET_ADVERTS = 'SET_ADVERTS';\r\nconst SET_LOCATION = 'SET_LOCATION';\r\n\r\nlet initialState = {\r\n\r\n  adverts: [],\r\n  namePage: '',\r\n\r\n}\r\n\r\nconst advertsReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n\r\n    case SET_ADVERTS:\r\n      let newAdvertList = [...state.adverts];\r\n      action.ads.map(ad => {\r\n        newAdvertList = [...newAdvertList, ad]\r\n      });\r\n\r\n      return {\r\n        ...state,\r\n        adverts: newAdvertList,\r\n      }\r\n\r\n\r\n    case SET_LOCATION:\r\n      let locationName = setLocationName(action.location);\r\n\r\n      return {\r\n        ...state,\r\n        namePage: locationName\r\n      }\r\n\r\n    default: return state;\r\n  }\r\n}\r\n\r\nexport const setAdverts = (ads) => ({type: SET_ADVERTS, ads});\r\n\r\n/*export const getImmovables = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/category/id1/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getTransport = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/category/id2/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getHousehold = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/category/id3/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getHouses = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id1/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getAppartaments = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id2/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getCars = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id3/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getMotocycles = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id4/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getAppliance = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id5/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n// todo ОБЕЩАЛ ИСПРАВИТЬ К ЗАЩИТЕ (ВСЁ В 1)\r\n\r\nexport const getFurniture = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id6/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}*/\r\n\r\nconst getCategoryAdverts = (props) => {\r\n  axios.get(`/ad/category/id${props.currentCategory.categoryId}/?limit=8&page=${page}`).then(\r\n      response => dispatch(setAdverts(response.data))\r\n  )\r\n}\r\n\r\nconst getSubcategoryAdverts = (props) => {\r\n  axios.get(`/ad/subcategory/id${props.currentCategory.sub}/?limit=8&page=${page}`)\r\n}\r\n\r\nexport const getNewAds = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/view?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getSearchedAds = (props) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/search?q=${props.search}&limit=10&page=${props.page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    ).catch()\r\n  }\r\n}\r\n// TODO ОБРАБОТКА ОШИБОК\r\n\r\nexport const setNamePage = (location) => (\r\n    { type: SET_LOCATION, location }\r\n);\r\n\r\nexport const getAdverts = (props) => {\r\n\r\n  return (dispatch) => {\r\n\r\n    if (props.currentCategory.categoryUrl !== null) {\r\n      dispatch()\r\n    }\r\n\r\n    /*switch (props.location.pathname) {\r\n      case MAIN_PAGE.url:\r\n        dispatch(getNewAds(props.page));\r\n        break;\r\n\r\n      case IMMOVABLES.url:\r\n        dispatch(getImmovables(props.page));\r\n        break;\r\n\r\n      case TRANSPORT.url:\r\n        dispatch(getTransport(props.page));\r\n        break;\r\n\r\n      case HOUSEHOLD.url:\r\n        dispatch(getHousehold(props.page));\r\n        break;\r\n\r\n      case APPARTAMENTS.url:\r\n        dispatch(getAppartaments(props.page));\r\n        break;\r\n\r\n      case HOUSES.url:\r\n        dispatch(getHouses(props.page));\r\n        break;\r\n\r\n      case CARS.url:\r\n        dispatch(getCars(props.page));\r\n        break;\r\n\r\n      case MOTO.url:\r\n        dispatch(getMotocycles(props.page));\r\n        break;\r\n\r\n      case APPLIANCE.url:\r\n        dispatch(getAppliance(props.page));\r\n        break;\r\n\r\n      case FURNITURE.url:\r\n        dispatch(getFurniture(props.page));\r\n        break;\r\n\r\n      case AD_SEARCH.url:\r\n        dispatch(getSearchedAds({ page: props.page, search: props.search }));\r\n        break;\r\n\r\n      default:\r\n        return null;\r\n    }*/\r\n\r\n  }\r\n}\r\n// TODO ПОЛУЧАТЬ ЗНАЧЕНИЯ ИЗ БД\r\n\r\nexport default advertsReducer;"]},"metadata":{},"sourceType":"module"}