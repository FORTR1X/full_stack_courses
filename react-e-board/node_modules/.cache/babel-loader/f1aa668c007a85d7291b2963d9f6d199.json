{"ast":null,"code":"import axios from \"axios\";\nimport { MAIN_PAGE, TRANSPORT, IMMOVABLES, HOUSEHOLD, APPARTAMENTS, HOUSES, CARS, MOTO, APPLIANCE, FURNITURE, setLocationName, AD_SEARCH } from \"./UrlReducer\";\nconst SET_ADVERTS = 'SET_ADVERTS';\nconst SET_LOCATION = 'SET_LOCATION';\nlet initialState = {\n  adverts: [],\n  namePage: ''\n};\n\nconst advertsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SET_ADVERTS:\n      let newAdvertList = [...state.adverts];\n      action.ads.map(ad => {\n        newAdvertList = [...newAdvertList, ad];\n      });\n      return { ...state,\n        adverts: newAdvertList\n      };\n\n    case SET_LOCATION:\n      let locationName = setLocationName(action.location);\n      return { ...state,\n        namePage: locationName\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const setAdverts = ads => ({\n  type: SET_ADVERTS,\n  ads\n});\n\nconst getCategoryAdverts = props => {\n  return dispatch => {\n    axios.get(`/ad/category/id${props.currentCategory.categoryId}/?limit=8&page=${page}`).then(response => dispatch(setAdverts(response.data)));\n  };\n};\n\nconst getSubcategoryAdverts = props => {\n  return dispatch => {\n    axios.get(`/ad/subcategory/id${props.currentCategory.subId}/?limit=8&page=${page}`).then(response => dispatch(setAdverts(response.data)));\n  };\n};\n\nexport const getNewAds = page => {\n  return dispatch => {\n    axios.get(`/ad/view?limit=8&page=${page}`).then(response => dispatch(setAdverts(response.data)));\n  };\n};\nexport const getSearchedAds = props => {\n  return dispatch => {\n    axios.get(`/ad/search?q=${props.search}&limit=10&page=${props.page}`).then(response => dispatch(setAdverts(response.data))).catch();\n  };\n}; // TODO ОБРАБОТКА ОШИБОК\n\nexport const setNamePage = location => ({\n  type: SET_LOCATION,\n  location\n});\nexport const getAdverts = props => {\n  return dispatch => {\n    if (props.currentCategory.categoryUrl !== null) {\n      dispatch(getCategoryAdverts({\n        currentCategory: props.currentCategory,\n        page: props.page\n      }));\n      setNamePage(currentCategory.categoryName);\n    }\n\n    if (props.currentCategory.subcategoryUrl !== null) {\n      dispatch(getSubcategoryAdverts({\n        currentCategory: props.currentCategory,\n        page: props.page\n      }));\n      setNamePage(currentCategory.subcategories);\n    }\n\n    if (props.currentCategory.url !== null) {\n      switch (props.currentCategory.url) {\n        case '/':\n          dispatch(getNewAds(props.page));\n          setNamePage('Новые объявления');\n          break;\n\n        case '/ad/search/':\n          dispatch(getSearchedAds({\n            search: props.search,\n            page: props.page\n          }));\n          setNamePage('Поиск по объявлениям');\n          break;\n\n        default:\n          return null;\n      }\n    }\n  };\n}; // TODO ПОЛУЧАТЬ ЗНАЧЕНИЯ ИЗ БД\n\nexport default advertsReducer;","map":{"version":3,"sources":["C:/Users/FORTRIX/Desktop/react_project/src/redux/AdvertsReducer.js"],"names":["axios","MAIN_PAGE","TRANSPORT","IMMOVABLES","HOUSEHOLD","APPARTAMENTS","HOUSES","CARS","MOTO","APPLIANCE","FURNITURE","setLocationName","AD_SEARCH","SET_ADVERTS","SET_LOCATION","initialState","adverts","namePage","advertsReducer","state","action","type","newAdvertList","ads","map","ad","locationName","location","setAdverts","getCategoryAdverts","props","dispatch","get","currentCategory","categoryId","page","then","response","data","getSubcategoryAdverts","subId","getNewAds","getSearchedAds","search","catch","setNamePage","getAdverts","categoryUrl","categoryName","subcategoryUrl","subcategories","url"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\n\r\nimport {\r\n  MAIN_PAGE,\r\n  TRANSPORT, IMMOVABLES, HOUSEHOLD,\r\n  APPARTAMENTS, HOUSES,\r\n  CARS, MOTO,\r\n  APPLIANCE, FURNITURE, setLocationName, AD_SEARCH\r\n} from \"./UrlReducer\";\r\n\r\nconst SET_ADVERTS = 'SET_ADVERTS';\r\nconst SET_LOCATION = 'SET_LOCATION';\r\n\r\nlet initialState = {\r\n\r\n  adverts: [],\r\n  namePage: '',\r\n\r\n}\r\n\r\nconst advertsReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n\r\n    case SET_ADVERTS:\r\n      let newAdvertList = [...state.adverts];\r\n      action.ads.map(ad => {\r\n        newAdvertList = [...newAdvertList, ad]\r\n      });\r\n\r\n      return {\r\n        ...state,\r\n        adverts: newAdvertList,\r\n      }\r\n\r\n\r\n    case SET_LOCATION:\r\n      let locationName = setLocationName(action.location);\r\n\r\n      return {\r\n        ...state,\r\n        namePage: locationName\r\n      }\r\n\r\n    default: return state;\r\n  }\r\n}\r\n\r\nexport const setAdverts = (ads) => ({type: SET_ADVERTS, ads});\r\n\r\nconst getCategoryAdverts = (props) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/category/id${props.currentCategory.categoryId}/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nconst getSubcategoryAdverts = (props) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/subcategory/id${props.currentCategory.subId}/?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getNewAds = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/view?limit=8&page=${page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    )\r\n  }\r\n}\r\n\r\nexport const getSearchedAds = (props) => {\r\n  return (dispatch) => {\r\n    axios.get(`/ad/search?q=${props.search}&limit=10&page=${props.page}`).then(\r\n        response => dispatch(setAdverts(response.data))\r\n    ).catch()\r\n  }\r\n}\r\n// TODO ОБРАБОТКА ОШИБОК\r\n\r\nexport const setNamePage = (location) => (\r\n    { type: SET_LOCATION, location }\r\n);\r\n\r\nexport const getAdverts = (props) => {\r\n\r\n  return (dispatch) => {\r\n\r\n    if (props.currentCategory.categoryUrl !== null) {\r\n      dispatch(getCategoryAdverts({currentCategory: props.currentCategory, page: props.page}));\r\n      setNamePage(currentCategory.categoryName);\r\n    }\r\n\r\n    if (props.currentCategory.subcategoryUrl !== null) {\r\n      dispatch(getSubcategoryAdverts({currentCategory: props.currentCategory, page: props.page}));\r\n      setNamePage(currentCategory.subcategories);\r\n    }\r\n\r\n    if (props.currentCategory.url !== null) {\r\n      switch (props.currentCategory.url) {\r\n        case '/':\r\n          dispatch(getNewAds(props.page));\r\n          setNamePage('Новые объявления');\r\n          break;\r\n\r\n        case '/ad/search/':\r\n          dispatch(getSearchedAds({search: props.search, page: props.page}));\r\n          setNamePage('Поиск по объявлениям')\r\n          break;\r\n\r\n        default: return null;\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n// TODO ПОЛУЧАТЬ ЗНАЧЕНИЯ ИЗ БД\r\n\r\nexport default advertsReducer;"]},"metadata":{},"sourceType":"module"}